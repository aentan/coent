!function(t,i){"function"==typeof define&&define.amd?define(["jquery"],i):i(t.jQuery)}(this,function(t){"use strict";var i,n={friction:.5},e=t(window),o=0;return window.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,5-(i-o)),e=window.setTimeout(function(){t(i+n)},n);return o=i+n,e},i=function(i,o){return{init:function(){this.$background=t(i),this.settings=t.extend({},n,o),this._initStyles(),this._bindEvents()},_initStyles:function(){this.$background.css({"background-attachment":"scroll"})},_visibleInViewport:function(){var t=e.height(),i=this.$background.get(0).getBoundingClientRect();return i.top<t&&i.bottom>0||i.bottom<=t&&i.top>t},_bindEvents:function(){var t=this;e.on("load scroll resize",function(){t._requestTick()})},_requestTick:function(){var t=this;this.ticking||(this.ticking=!0,requestAnimationFrame(function(){t._updateBgPos()}))},_updateBgPos:function(){if(this._visibleInViewport()){var t=e.width(),i=e.height(),n=this.$background.data("width"),o=this.$background.data("height"),s=n/o,r=this.$background.width(),u=this.$background.height(),c=r/u,a=s>c,h=r/n,d=o*h,f=this.$background.offset().top,g=e.scrollTop(),b=g-f,k=i+d,l=b*(i/k),p=b/i,w=(i-u)/2;w=a?w*p:w;var m=a?2*this.settings.friction*c:this.settings.friction*c,v=a?"auto "+i+"px":t+"px auto",_=l*m-w;this.$background.css({"background-size":v,"background-position":"50% "+_+"px"})}this.ticking=!1}}},i.defaults=n,t.fn.parallaxScroll=function(t){return this.each(function(){new i(this,t).init()})},i});